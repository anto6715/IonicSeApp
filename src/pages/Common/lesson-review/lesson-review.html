<!--
  Generated template for the LessonReviewPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar class="nvb" color="yellowdark">

    <ion-buttons>
      <button ion-button (click)="dismiss()" class="close">Close</button>
      <ion-title class="title" text-right>Recensione</ion-title>
    </ion-buttons>

  </ion-navbar>

</ion-header>


<ion-content  *ngIf="user.userType == value.student">


  <ion-card>
    <ion-card-header class="headerCard">
      {{lesson.teachingDTO.name}}
    </ion-card-header>

    <ion-item>
      <b>Professore:</b> {{lesson.teachingDTO.professorDTO.name}} {{lesson.teachingDTO.professorDTO.surname}}
    </ion-item>
    <hr>
    <ion-item>
      <b>Aula:</b> {{lesson.roomDTO.name}}
    </ion-item>
    <hr>
    <ion-item>
      <b>Data:</b> {{lesson.date}}
    </ion-item>
    <hr>
    <ion-item>
      <b>Orario:</b> {{lesson.start}}-{{lesson.end}}
    </ion-item>
    <hr>

    <ion-item text-center="" *ngIf="review != null">
      <b>Recensione</b>
      <rating [(ngModel)]="review.rate"
              readOnly="true"
              max="5"
              emptyStarIconName="star-outline"
              halfStarIconName="star-half"
              starIconName="star"
              nullable="false"

              (ngModelChange)="onModelChange($event)">
      </rating>
    </ion-item>


    <ion-item text-center="" *ngIf="review == null">
      <b>Valutazione</b>
      <rating [(ngModel)]="rate"
              readOnly={{enableReview}}
              max="5"
              emptyStarIconName="star-outline"
              halfStarIconName="star-half"
              starIconName="star"
              nullable="false"

              (ngModelChange)="onModelChange($event)">
      </rating>
    </ion-item>

    <ion-item text-center>
      <b>Note</b>
    </ion-item>

    <ion-item *ngIf="review != null">
      <ion-label *ngIf="review.note != null" text-center="">{{review.note}}</ion-label>
    </ion-item>

    <ion-item *ngIf="review == null">
      <ion-label floating>Inserisci recensione</ion-label>
      <ion-input [(ngModel)]="note" [disabled]="!enableSend" type="text" ></ion-input>
    </ion-item>

    <ion-item *ngIf="review == null">
      <ion-buttons>
        <button ion-button class="btn" round [disabled]="!enableSend" (click)="sendReview()">Invia</button>
      </ion-buttons>
    </ion-item>


  </ion-card>

</ion-content>


<ion-content  *ngIf="user.userType == value.professor">
  <ion-card >
    <ion-card-header class="headerCard">
      {{lesson.teachingDTO.name}}
    </ion-card-header>
    <ion-item>
      <b>Data:</b> {{lesson.date}}
    </ion-item>
    <hr>
    <ion-item>
      <b>Orario:</b> {{lesson.start}}-{{lesson.end}}
    </ion-item>
    <hr>
    <ion-card-content *ngFor="let r of reviews; let i = index">
      <ion-item text-center>
        <b>Recensione {{i+1}}</b>
        <rating [(ngModel)]="r.rate"
                readOnly="true"
                max="5"
                emptyStarIconName="star-outline"
                halfStarIconName="star-half"
                starIconName="star"
                nullable="false"

                (ngModelChange)="onModelChange($event)">
        </rating>
      </ion-item>

      <ion-item text-center>
        <b>Note</b>
      </ion-item>
      <ion-item >
        <ion-label *ngIf="r.note != null" text-center="">{{r.note}}</ion-label>
      </ion-item>
      <hr>
    </ion-card-content>
  </ion-card>
</ion-content>




